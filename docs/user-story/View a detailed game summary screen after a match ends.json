{'story_metadata': {'story_id': 'US-048', 'elaboration_date': '2025-01-15', 'development_readiness': 'Complete'}, 'story_narrative': {'title': 'View a detailed game summary screen after a match ends', 'as_a_user_story': 'As a Human Player who has just completed a game, I want to be shown a detailed game summary screen so that I can review the performance of all players, understand the final outcome, and feel a sense of closure for the match.', 'user_persona': 'The human player who has just finished a game session by either winning or losing.', 'business_value': 'Provides a satisfying conclusion to the gameplay loop, enhances player engagement by offering performance feedback, and supports the core objective of replayability by allowing players to analyze their game.', 'functional_area': 'Game Flow & User Interface', 'story_theme': 'End-Game Experience'}, 'acceptance_criteria': [{'criteria_id': 'AC-001', 'scenario': 'Human player wins the game', 'scenario_type': 'Happy_Path', 'given': 'a game is in progress with a human player and one or more AI opponents', 'when': 'the last AI opponent is declared bankrupt, triggering the win condition for the human player', 'then': "the main game view transitions to the Game Summary screen, and a 'Victory!' message is prominently displayed, and the human player is visually highlighted as the winner, and a statistics section is shown for all players who participated in the match, and a 'Return to Main Menu' button is visible and functional."}, {'criteria_id': 'AC-002', 'scenario': 'Human player loses the game', 'scenario_type': 'Happy_Path', 'given': 'a game is in progress with a human player and multiple AI opponents', 'when': 'the human player is declared bankrupt, triggering the lose condition', 'then': "the game simulates the remaining AI turns at high speed until a single AI winner is determined, and the Game Summary screen is displayed with a 'Game Over' message, and the final winning AI player is visually highlighted as the winner, and the human player's status is shown as 'Bankrupt', and statistics for all players are displayed."}, {'criteria_id': 'AC-003', 'scenario': 'Statistics displayed are accurate', 'scenario_type': 'Happy_Path', 'given': 'the Game Summary screen is displayed after a match', 'when': 'the user reviews the statistics for any player', 'then': "the values for 'Final Net Worth', 'Total Rent Collected', 'Properties Owned', and other displayed stats must accurately reflect the final state of the game for that player."}, {'criteria_id': 'AC-004', 'scenario': 'UI layout adapts to player count', 'scenario_type': 'Alternative_Flow', 'given': 'a game has concluded', 'when': 'the Game Summary screen is displayed for a 2-player, 3-player, or 4-player game', 'then': 'the UI layout must dynamically adjust to display all player statistics clearly and without any visual overlap or artifacts.'}, {'criteria_id': 'AC-005', 'scenario': 'Navigation from summary screen', 'scenario_type': 'Happy_Path', 'given': 'the Game Summary screen is being displayed', 'when': "the user clicks the 'Return to Main Menu' button", 'then': 'the application navigates to the main menu screen, and the summary screen is no longer visible.'}], 'user_interface_requirements': {'ui_elements': ["Main Title Text (e.g., 'Victory!' or 'Game Over')", 'Winner Highlight Element (e.g., a crown icon, a special border, or a banner)', 'Player Stat Card/Row for each player (2 to 4)', 'Player Name Display', 'Player Token Icon', "Final Status Display (e.g., 'Winner', 'Bankrupt')", 'Statistics List per player (e.g., Final Net Worth, Total Rent Collected, Properties Owned)', "A single, clear Call-to-Action Button ('Return to Main Menu')"], 'user_interactions': ['The screen must appear automatically upon game conclusion without user input.', "The only primary interaction is clicking the 'Return to Main Menu' button."], 'display_requirements': ['The winner of the match must be unambiguously identifiable.', 'Statistics must be presented in a way that is easy to compare between players.', 'The screen must be legible and well-formatted on all supported aspect ratios (16:9, 16:10, 21:9).'], 'accessibility_needs': ['Text must have sufficient contrast against the background to be easily readable.', 'The winner highlight should use more than just color to signify status (e.g., an icon and text label).']}, 'business_rules': [{'rule_id': 'BR-001', 'rule_description': 'The Game Summary screen must only be displayed after a definitive game-ending condition (one player remaining) has been met.', 'enforcement_point': 'Game State Manager upon detecting a win/loss condition.', 'violation_handling': 'The game continues until a valid end condition is met. Quitting the game does not trigger this screen.'}, {'rule_id': 'BR-002', 'rule_description': 'If the human player is bankrupt, the game must simulate to completion to determine the ultimate AI winner before displaying the summary screen, as per SRS section 7.3.', 'enforcement_point': 'Game logic immediately following human player bankruptcy.', 'violation_handling': 'The summary screen is not shown until the simulation is complete and a final winner is declared.'}], 'dependencies': {'prerequisite_stories': [{'story_id': 'US-046', 'dependency_reason': 'This story implements the victory screen mentioned in US-046.'}, {'story_id': 'US-047', 'dependency_reason': 'This story implements the game-over screen mentioned in US-047.'}, {'story_id': 'US-013', 'dependency_reason': 'Requires the underlying data tracking mechanism that also feeds the persistent historical statistics.'}], 'technical_dependencies': ['A robust in-game statistics tracking service that aggregates player data throughout a match.', "The core game engine's bankruptcy and win/loss condition detection logic.", 'A scene/state manager to handle the transition from the game board to the summary screen.'], 'data_dependencies': ['Access to the final game state, including all player data (cash, properties, status) and tracked session statistics (rent paid/collected, etc.).'], 'external_dependencies': []}, 'non_functional_requirements': {'performance': ['The transition to the Game Summary screen after the final game action should take no more than 2 seconds.', 'The high-speed AI simulation (on human loss) must not cause the application to hang or become unresponsive.'], 'security': ['Not applicable for this feature.'], 'usability': ['The screen must be intuitive, requiring no explanation for the user to understand the results and how to exit.'], 'accessibility': ['Adherence to basic readability standards (contrast, font size).'], 'compatibility': ['The UI layout must function correctly on all target resolutions and aspect ratios as defined in SRS 2.5.']}, 'implementation_considerations': {'complexity_assessment': 'Medium', 'complexity_factors': ['Development of a reliable, session-based statistics tracking service that hooks into various game events.', 'Implementation of the high-speed AI vs. AI simulation logic that runs post-human-bankruptcy.', 'Creating a flexible UI layout that gracefully handles 2, 3, and 4 players.'], 'technical_risks': ['The statistics tracking service could miss events, leading to inaccurate data on the summary screen.', 'The post-game AI simulation could introduce bugs or performance issues if not implemented carefully.'], 'integration_points': ['Game Event System (for tracking stats).', 'Player State Manager (for final player data).', 'UI/Scene Management System (for screen transitions).']}, 'testing_requirements': {'testing_types': ['Unit', 'Integration', 'E2E'], 'test_scenarios': ['Win a 2-player game and verify summary screen.', 'Lose a 4-player game and verify the correct AI winner and stats after simulation.', 'Manually calculate stats during a short game and verify they match the summary screen values.', 'Test screen layout on various resolutions and aspect ratios.'], 'test_data_needs': ['Pre-configured game state files that are one move away from a win or loss condition to expedite testing.'], 'testing_tools': ['NUnit for unit tests.', 'Unity Test Framework for integration tests.']}, 'definition_of_done': ['All acceptance criteria validated and passing', 'Code reviewed and approved by team', 'Unit tests for the statistics tracking logic are implemented and passing with >80% coverage', 'Integration testing for the game-end-to-summary-screen flow is completed successfully', 'User interface reviewed and approved for all player counts (2-4)', 'Performance requirements for screen transition are verified', "The 'Return to Main Menu' functionality is confirmed working", 'Story deployed and verified in staging environment'], 'planning_information': {'story_points': '5', 'priority': 'High', 'sprint_considerations': ['This story should be scheduled in a sprint after the core bankruptcy and game-ending logic is complete and stable.', 'The underlying statistics tracking service could be a separate technical task completed in an earlier sprint.'], 'release_impact': 'Critical for a complete and satisfying user experience. The game cannot be considered feature-complete without it.'}}